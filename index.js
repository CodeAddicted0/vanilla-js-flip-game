"use strict";const imgContainer=document.querySelector("#imgContainer"),resultText=document.querySelector("#result"),restartBtn=document.querySelector("#restart"),modal=document.querySelector(".emptyTaskModal"),usernameBlock=document.querySelector("#side-nav .user-name"),userMoneyBlock=document.querySelector("#userMoney"),hamBurger=document.querySelector(".ham-burger"),sideNav=document.querySelector("#side-nav"),burgers=document.querySelectorAll(".burger"),getHintBtn=document.querySelector("#get-hint"),shop=document.querySelector("#shop"),shopBtn=document.querySelector("#shop-btn"),shopHamBurger=document.querySelector(".shop-ham-burger"),buyBtn=document.querySelectorAll(".shop-items button");document.addEventListener("DOMContentLoaded",getUserData),window.addEventListener("load",()=>{document.querySelector(".loaderbg").style.opacity="0",document.querySelector(".loaderbg").style.visibility="hidden",document.querySelector(".loaderbg").style.pointerEvents="none"}),hamBurger.addEventListener("click",()=>{sideNav.classList.toggle("side-nav-showed"),burgers[1].classList.toggle("middle-rem"),burgers[0].classList.toggle("top-bur"),burgers[2].classList.toggle("bottom-bur")});let choices=["ninja","player","coder","ninja","player","coder"],packOrigin="default-pack",imgArr=[];for(let e=0;e<6;e++){const e=document.createElement("div"),t=document.createElement("img");e.appendChild(t),imgArr.push(e)}let randomisedChoice=shuffleArray(choices);function createImgs(){imgArr.forEach((e,t)=>{e.firstElementChild.setAttribute("src",`img/${packOrigin}/${randomisedChoice[t]}.svg`),e.firstElementChild.style.zIndex="3",e.firstElementChild.setAttribute("data-choice",randomisedChoice[t]),e.firstElementChild.setAttribute("class","w-1/2 xl:w-1/3 m-3 2xl:w-1/3 lg:w-1/3 opacity-0 transition duration-500"),e.classList.add("for-select"),imgContainer.appendChild(e)})}function createModal(e,t,a,n,r,i){modal.classList.remove("hidden-modal");const s=document.createElement("p"),o=document.createElement("input"),l=document.createElement("button"),c=document.createElement("button");s.innerText=e,o.style.margin="1rem 0",s.style.margin="1rem 0",l.style.margin="1rem 0",c.classList.add("sure-btn"),l.classList.add("normal-btn"),o.style.display=t,l.style.display=a,c.style.display=r,l.classList.add("modal-btn"),l.innerText=n,c.innerText=i,modal.classList.add("getIn"),modal.appendChild(s),modal.appendChild(o),modal.appendChild(l),modal.appendChild(c),modal.removeEventListener("animationend",fadeOutModal,!0),modal.addEventListener("animationstart",()=>{c.style.pointerEvents="none",l.style.pointerEvents="none"}),modal.addEventListener("animationend",()=>{c.style.pointerEvents="all",l.style.pointerEvents="all"}),"none"!==a&&l.addEventListener("click",()=>{modal.classList.replace("getIn","getOut"),modal.addEventListener("animationend",fadeOutModal,!0)}),"none"!==r&&c.addEventListener("click",()=>{modal.classList.replace("getIn","getOut"),modal.addEventListener("animationend",fadeOutModal,!0)})}function fadeOutModal(){modal.classList.add("hidden-modal"),[].forEach.call(modal.children,e=>{setTimeout(function(){e.remove()},10)})}function shuffleArray(e){for(let t=e.length-1;t>0;t--){let a=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[a],e[a]=n}return e}function updateStuff(){randomisedChoice=shuffleArray(choices),imgArr.forEach((e,t)=>{e.firstElementChild.setAttribute("src",`img/${packOrigin}/${randomisedChoice[t]}.svg`),e.firstElementChild.setAttribute("data-choice",randomisedChoice[t])})}createImgs(),setTimeout(function(){updateStuff()},10);let chances=1,targetData=null,hintUsed=!1;const divs=document.querySelectorAll(".for-select");function clickFx(e){e.firstElementChild.classList.remove("opacity-0"),e.style.background="initial",e.style.transition="all .7s ease-in",e.firstElementChild.classList.contains("transition")||e.firstElementChild.classList.add("transition","duration-500"),divs.forEach(e=>{e.firstElementChild.nextElementSibling&&e.firstElementChild.nextElementSibling.classList.contains("hint-text")&&e.firstElementChild.nextElementSibling.remove()});let t=e.firstElementChild;null===targetData&&(targetData=e),results(t)}function results(e){if(chances<2&&chances>0&&e.parentElement!==targetData){if(e.getAttribute("data-choice")===targetData.firstElementChild.getAttribute("data-choice")){"Losser🖕🏻"!==resultText.innerText&&(resultText.innerText="Winner🏆",resultText.classList.add("animate-bounce")),restartBtn.classList.replace("opacity-0","opacity-100"),restartBtn.classList.add("transform","translate-y-4");let e=JSON.parse(localStorage.getItem("flipData")),t=e.money;setMoney(e,hintUsed?t:++t),userMoneyBlock.innerText=`${e.money}$`}chances-=1}0===chances&&("Winner🏆"!==resultText.innerText&&(resultText.innerText="Losser🖕🏻",resultText.classList.add("animate-bounce")),restartBtn.classList.replace("opacity-0","opacity-100"),restartBtn.classList.remove("pointer-events-none"),restartBtn.classList.add("transform","translate-y-4"))}function setUserData(e,t){e.name=t,localStorage.setItem("flipData",JSON.stringify(e))}function setMoney(e,t){e.money=t,localStorage.setItem("flipData",JSON.stringify(e))}function setIconPack(e,t){e.iconPack=t,localStorage.setItem("flipData",JSON.stringify(e))}function getUserData(){let e;null===localStorage.getItem("flipData")?(e={},createModal("Your Name?","block","block","Confirm","none",""),document.querySelector(".emptyTaskModal button").addEventListener("click",()=>{if(""!==document.querySelector(".emptyTaskModal input").value){let t=document.querySelector(".emptyTaskModal input").value;setUserData(e,t),setMoney(e,0),setIconPack(e,"superhero-pack"),modal.classList.replace("getIn","getOut"),modal.addEventListener("animationend",()=>{modal.classList.add("hidden-modal")}),usernameBlock.innerText=t}else document.querySelector(".emptyTaskModal p").innerText="Enter Valid Name"})):(e=JSON.parse(localStorage.getItem("flipData")),packOrigin=e.iconPack,usernameBlock.innerText=e.name,userMoneyBlock.innerText=`${e.money}$`,"default-pack"===packOrigin?choices=["ninja","player","coder","ninja","player","coder"]:"technology-pack"===packOrigin?choices=["satellite","dish-tec","router","satellite","dish-tec","router"]:"fruits-pack"===packOrigin?choices=["tomato","orange","strawberry","tomato","orange","strawberry"]:"superhero-pack"===packOrigin?choices=["deadpool","spiderman","wolverine","deadpool","spiderman","wolverine"]:"flower-pack"===packOrigin&&(choices=["hibiscus","lotus","rose","hibiscus","lotus","rose"]))}let canGetHint,needHint;function hintGetable(){canGetHint=!(null===targetData||!restartBtn.classList.contains("opacity-0"))}function getHintCard(){divs.forEach(e=>{e!==targetData&&e.firstElementChild.getAttribute("data-choice")===targetData.firstElementChild.getAttribute("data-choice")&&(needHint=e)})}function getHint(){getHintCard();let e=document.createElement("p");e.innerText="click here",e.classList.add("hint-text"),needHint.appendChild(e)}divs.forEach(e=>{e.addEventListener("click",()=>{clickFx(e)})}),restartBtn.addEventListener("click",()=>{randomisedChoice=shuffleArray(choices),imgArr.forEach((e,t)=>{e.style.transition="none",e.firstElementChild.classList.remove("transition","duration-500"),e.firstElementChild.setAttribute("src",`img/${packOrigin}/${randomisedChoice[t]}.svg`),e.firstElementChild.setAttribute("data-choice",randomisedChoice[t]),e.firstElementChild.classList.add("opacity-0"),e.style.background="linear-gradient(to bottom right, #059669, #34D399)"}),chances=1,resultText.innerText="Click on any one",targetData=null,restartBtn.classList.replace("opacity-100","opacity-0"),restartBtn.classList.remove("transform","translate-y-4"),resultText.classList.remove("animate-bounce"),restartBtn.classList.add("pointer-events-none"),hintUsed=!1}),setInterval(hintGetable,100),getHintBtn.addEventListener("click",()=>{let e=JSON.parse(localStorage.getItem("flipData")),t=e.money;canGetHint&&t>0?(getHint(),hintUsed=!0,setMoney(e,--t)):t<1?createModal("Didn't have sufficient money","none","block","Ok","none",""):null===targetData?createModal("Plz Flip First Card.","none","block","Ok","none",""):restartBtn.classList.contains("opacity-0")||createModal("Plz restart the game.","none","block","Ok","none",""),sideNav.classList.remove("side-nav-showed"),burgers[1].classList.remove("middle-rem"),burgers[0].classList.remove("top-bur"),burgers[2].classList.remove("bottom-bur")}),shopHamBurger.addEventListener("click",()=>{shop.classList.add("fade-out")}),shopBtn.addEventListener("click",()=>{shop.classList.remove("fade-out"),sideNav.classList.remove("side-nav-showed"),burgers[1].classList.remove("middle-rem"),burgers[0].classList.remove("top-bur"),burgers[2].classList.remove("bottom-bur")}),buyBtn.forEach(e=>{e.addEventListener("click",()=>{let t=JSON.parse(localStorage.getItem("flipData"));const a=e.getAttribute("data-price");let n=t.money;packOrigin===e.parentElement.firstElementChild.getAttribute("data-pack")?createModal("You already have same pack!","none","block","Ok","none",""):a>n?createModal("You didn't have sufficient money","none","block","Ok","none",""):t.money>a&&(createModal("Sure?","none","block","No!","block","Yes."),document.querySelector(".sure-btn").addEventListener("click",()=>{packOrigin=e.parentElement.firstElementChild.getAttribute("data-pack"),setIconPack(t,packOrigin),"default-pack"===packOrigin?choices=["ninja","player","coder","ninja","player","coder"]:"technology-pack"===packOrigin?choices=["satellite","dish-tec","router","satellite","dish-tec","router"]:"fruits-pack"===packOrigin?choices=["tomato","orange","strawberry","tomato","orange","strawberry"]:"superhero-pack"===packOrigin?choices=["deadpool","spiderman","wolverine","deadpool","spiderman","wolverine"]:"flower-pack"===packOrigin&&(choices=["hibiscus","lotus","rose","hibiscus","lotus","rose"]),updateStuff(),setMoney(t,n-=a),userMoneyBlock.innerText=`${t.money}$`}))})});